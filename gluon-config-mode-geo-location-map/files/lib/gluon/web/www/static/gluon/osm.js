function showMap(){if("object"==typeof OpenLayers&&null!==document.getElementById("cbid.wizard.1._longitude")){document.getElementById("locationPickerMap").style.display="block";var e=new OpenLayers.Projection("EPSG:4326"),a=new OpenLayers.Projection("EPSG:900913"),t=12,n=new OpenLayers.Layer.Markers("Markers");OpenLayers.Control.Click=OpenLayers.Class(OpenLayers.Control,{defaultHandlerOptions:{single:!0,"double":!1,pixelTolerance:0,stopSingle:!1,stopDouble:!1},initialize:function(){this.handlerOptions=OpenLayers.Util.extend({},this.defaultHandlerOptions),OpenLayers.Control.prototype.initialize.apply(this,arguments),this.handler=new OpenLayers.Handler.Click(this,{click:this.trigger},this.handlerOptions)},trigger:function(t){var i=osmMap.getLonLatFromPixel(t.xy);lonlat1=new OpenLayers.LonLat(i.lon,i.lat).transform(a,e),document.getElementById("cbid.wizard.1._longitude").value=lonlat1.lon,document.getElementById("cbid.wizard.1._latitude").value=lonlat1.lat,n.clearMarkers(),n.addMarker(new OpenLayers.Marker(i)),document.getElementById("cbid.wizard.1._longitude").className=document.getElementById("cbid.wizard.1._longitude").className.replace(/ cbi-input-invalid/g,""),document.getElementById("cbid.wizard.1._latitude").className=document.getElementById("cbid.wizard.1._latitude").className.replace(/ cbi-input-invalid/g,""),cbi_d_update("cbid.wizard.1._longitude"),cbi_d_update("cbid.wizard.1._latitude")}}),osmMap=new OpenLayers.Map("locationPickerMap",{controls:[new OpenLayers.Control.Navigation,new OpenLayers.Control.PanZoomBar,new OpenLayers.Control.MousePosition],maxExtent:new OpenLayers.Bounds(-20037508.34,-20037508.34,20037508.34,20037508.34),numZoomLevels:18,maxResolution:156543,units:"m",projection:a,displayProjection:e});var i=new OpenLayers.Layer.OSM("OpenStreetMap");osmMap.addLayer(i),osmMap.addLayer(n);var o=longitude,r=latitude;""!=document.getElementById("cbid.wizard.1._longitude").value&&(o=document.getElementById("cbid.wizard.1._longitude").value),""!=document.getElementById("cbid.wizard.1._latitude").value&&(r=document.getElementById("cbid.wizard.1._latitude").value),n.addMarker(new OpenLayers.Marker(new OpenLayers.LonLat(o,r).transform(e,a)));var l=new OpenLayers.LonLat(o,r),d=l.transform(e,a);osmMap.setCenter(d,t);var s=new OpenLayers.Control.Click;osmMap.addControl(s),s.activate()}else setTimeout(showMap,1e3)}var latitude=50.356667,longitude=7.593889;
